(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ticket/feizhuticket"],{"0821":function(t,e,n){"use strict";n.r(e);var a=n("da7e"),o=n("6704");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("f3d4");var s=n("2877"),c=Object(s["a"])(o["default"],a["a"],a["b"],!1,null,"2aefdebc",null);e["default"]=c.exports},6704:function(t,e,n){"use strict";n.r(e);var a=n("f319"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},da7e:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},e26a:function(t,e,n){},f319:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("e316"),o=i(n("7530"));function i(t){return t&&t.__esModule?t:{default:t}}n("f82e");var s=function(){return n.e("components/YnComponents/ynGallery/ynGallery").then(n.bind(null,"cad9"))},c=function(){return n.e("components/popup-layer").then(n.bind(null,"d80b"))},d=function(){return n.e("components/common/uni-popup/uni-popup").then(n.bind(null,"e161"))},u=function(){return Promise.all([n.e("common/vendor"),n.e("components/gaoyia-parse/parse")]).then(n.bind(null,"d4ae"))};o.default.locale("zh-cn");var r=1,l={components:{ynGallery:s,popupLayer:c,uniPopup:d,uParse:u},data:function(){return{tid:"",productName:"",imgList:[],content:"",addressStr:"",changeCss:!1,openId:"",address:"",distance:"",longitude:"",latitude:"",commentList:[],showPopup:!1,showBottomNav:!0,pop_upbox:[{name:"门票购买"},{name:"评价"},{name:"呼我打车"}],boolShow:!1,btn:!1,idx:999,isIphoneX:!1,infoCode:"",ticketifo:[],date:[],nickname:"",avatar:"",externalId:"",token:"",morendate:"",cancelConditionArray:[],warmTips:"",instruction:""}},methods:{show:function(e){var n=this,i=t.getStorageSync("externalId");if(i){if(this.$refs.popupRef.show(),this.btn=!0,this.idx=e,0==this.idx){this.morendate=(0,o.default)().format("YYYY-MM-DD");var s=(0,o.default)().format("MM-DD"),c=(0,o.default)().add(1,"d").format("MM-DD"),d=(0,o.default)().add(2,"d").format("MM-DD");this.date=[s,c,d],a.requestZT.get("/api/public/sell_product/list",{params:{id:n.tid}}).then(function(t){n.ticketifo=t.data.content,console.log(n.ticketifo,222," at pages/ticket/feizhuticket.vue:181")}).catch(function(t){console.log(t," at pages/ticket/feizhuticket.vue:184")})}}else t.showLoading({title:"加载中"}),t.hideLoading()},loginIn:function(){a.requestZT.post("/api/public/user/login",{externalId:this.externalId,buyerNick:this.nickname,imgUrl:this.avatar}).then(function(e){"000000"==e.data.code?(t.setStorage({key:"openId",data:e.data.content.openid}),t.setStorage({key:"externalId",data:e.data.content.externalId}),t.setStorage({key:"token",data:e.data.content.token})):t.showToast({title:e.data.message})}).catch(function(t){console.log(t," at pages/ticket/feizhuticket.vue:273")})},close:function(){this.$refs.popupRef.close()},down:function(t){this.btn=t},handleShowPopup:function(){this.showBottomNav=!1,this.showPopup=!0},hidePopup:function(){this.showBottomNav=!0,this.showPopup=!1},getDetailData:function(){var e=this;a.requestZT.get("/api/public/sell_product/details",{params:{id:this.tid,longitude:this.longitude,latitude:this.latitude}}).then(function(n){"000000"==n.data.code?(e.productName=n.data.content.productName||"",e.content=n.data.content.sellPoint||"",e.addressStr=(n.data.content.province||"")+(n.data.content.city||"")+(n.data.content.address||"")||"",e.address=n.data.content.address||"",n.data.content.distance?e.distance=n.data.content.distance.substring(0,n.data.content.distance.lastIndexOf(".")+3)||"未知":e.distance="未知",e.imgList=n.data.content.imgUrlArray||[],e.infoCode=n.data.content.infoCode||"",e.cancelConditionArray=n.data.content.cancelConditionArray,e.instruction=n.data.content.instruction,e.warmTips=n.data.content.warmTips):t.showToast({title:n.data.message})})},getCommentList:function(){var e=this;a.requestZT.get("/api/public/comment/list",{params:{sellProductId:this.tid,status:r}}).then(function(n){"000000"==n.data.code?e.commentList=n.data.content:t.showToast({title:n.data.message})})},handleChangeCss:function(){this.changeCss=!0},handleCall:function(e){t.makePhoneCall({phoneNumber:e})}},onLoad:function(e){var n=this;this.tid=e.id,t.getSystemInfo({success:function(t){var e=t.model;-1!=e.search("iPhone X")&&(n.isIphoneX=!0)}}),t.getLocation({type:"wgs84",success:function(t){n.longitude=t.longitude,n.latitude=t.latitude,n.getDetailData()},fail:function(t){console.log("定位失败"," at pages/ticket/feizhuticket.vue:426"),n.longitude="",n.latitude="",n.getDetailData()}}),this.getCommentList();try{var a=t.getStorageSync("token");a&&(this.openId=t.getStorageSync("openId"))}catch(o){}}};e.default=l}).call(this,n("6e42")["default"])},f3d4:function(t,e,n){"use strict";var a=n("e26a"),o=n.n(a);o.a}},[["9601","common/runtime","common/vendor"]]]);