(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/popup-layer"],{"37aa":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("e316"),a=i(n("7530"));function i(t){return t&&t.__esModule?t:{default:t}}n("f82e");var s=function(){return n.e("components/reserve-date/reserve-date").then(n.bind(null,"fb20"))},r=function(){return n.e("components/lz-numinput/lz-numinput").then(n.bind(null,"2196"))},c=function(){return Promise.all([n.e("common/vendor"),n.e("components/added")]).then(n.bind(null,"7a02"))},u=function(){return n.e("components/createComment").then(n.bind(null,"e4b2"))};a.default.locale("zh-cn");var h={components:{reserveDate:s,createComment:u,lzNuminput:r,added:c},name:"popup-layer",model:{prop:"showPop",event:"change",btns:"btn"},props:{infoCode:{type:String},cancelConditionArray:{type:Array},showPop:{type:Boolean,default:!1},ticketifo:{type:Array,default:function(){return[]}},date:{type:Array,default:function(){return[]}},morendate:{type:String},direction:{type:String,default:"bottom"},autoClose:{type:Boolean,default:!0},btn:{type:Boolean,default:!1},idx:{type:Number,default:0},commentList:{type:Array,default:function(){return[]}},openId:{type:String,default:""},tid:{type:String,default:""},longitude:{type:String,default:""},latitude:{type:String,default:""},address:{type:String,default:""},instruction:{type:String,default:""}},data:function(){return{startAddress:"从当前位置出发",showAddComment:!1,ifshow:!1,translateValue:-100,site:-100,timer:null,iftoggle:!1,showchose:!1,text1:"未选择票型",text2:"总计 ￥",choseadate:!1,choseday:"",notice:{},org:0,org2:0,moreday:!1,lh:!1,chosetickets:!1,tickettp:"",ticketnub:"",ticketprice:"",total:"",ticketdate:"",list:[],ischose:!1,openCode:"",time:!0,a:"",arr:[],neednub:1,rule:0}},computed:{monidate:function(){var t=[{name:"今天",date:""},{name:"明天",date:""},{name:"后天",date:""}];return t[0].date=this.date[0],t[1].date=this.date[1],t[2].date=this.date[2],t},_translate:function(){var t={top:"transform:translateY(".concat(-this.translateValue,"%)"),bottom:"transform:translateY(".concat(this.translateValue,"%)"),left:"transform:translateX(".concat(-this.translateValue,"%)"),right:"transform:translateX(".concat(this.translateValue,"%)")};return t[this.direction]},_location:function(){var t={top:"bottom:".concat(this.site,"%;width:100%;"),bottom:"top:".concat(this.site,"%;width:100%;"),left:"right:0px;top:0;height:100%;",right:"left:0px;top:0;height:100%;"};return t[this.direction]+this._translate}},mounted:function(){this.showPop&&this.show(),this.a=this.throttle()},watch:{showPop:function(t){t?this.show():this.close()}},methods:{throttle:function(){var t=null,e=this;return function(){t||(e.zhifu(),t=setTimeout(function(){t=null},2e3))}},zhifu:function(){var e="",n=this,a=this.ticketdate;console.log(this.neednub,this.arr.length,909," at components/popup-layer.vue:428"),a||(a=this.morendate);try{var i=t.getStorageSync("externalId"),s=this.chosetickets;s&&this.neednub==this.arr.length?(e=i,console.log(n.infoCode," at components/popup-layer.vue:437"),console.log(n.openCode,"code"," at components/popup-layer.vue:438"),o.requestZT.post("/api/public/alipay/trade",{productCode:n.infoCode,amount:n.total,comeDate:a,count:n.ticketnub,externalId:e,merchantCode:"b49c90557893a9f8ed229df13305804a",payment:"1",userCode:n.openCode}).then(function(e){"000000"==e.data.code?(e.data.content.orderNo,e.data.content.outerId):t.showToast({title:e.data.message})}).catch(function(t){console.log(t," at components/popup-layer.vue:479")})):(this.neednub!=this.arr.length&&t.showToast({title:"请添加与门票数量相匹配的游客信息"}),""==s&&t.showToast({title:"请选择门票种类"}))}catch(r){console.log(r," at components/popup-layer.vue:497")}},cxxuanze:function(t,e){var n=[];0==this.arr.length&&(this.ischose=!1);for(var o=0;o<this.arr.length;o++){var a=999;this.arr[o].openCode==t&&(a=o,this.arr.splice(o,1)),this.arr.length>0&&a!=o&&n.push(this.arr[o].openCode)}this.openCode=n.toString(),console.log(this.arr,88," at components/popup-layer.vue:517")},chosemsg:function(t,e,n,o){this.openCode=e,this.arr=o,o.length>0?this.ischose=!0:this.ischose=!1},changeMonth:function(t){},backbtn:function(){this.choseadate=!1},changeDay:function(t){var e=[];e=t[0].date.split("-");var n=e[1];n<10&&(n="0"+n);var o=e[2];o<10&&(o="0"+o);var a=e[0];this.choseday=n+"-"+o,this.ticketdate=a+"-"+n+"-"+o,console.log(this.ticketdate," at components/popup-layer.vue:550")},thisdate:function(t){switch(this.org=t,this.moreday=!1,t){case 0:this.ticketdate=(0,a.default)().format("YYYY-MM-DD");break;case 1:this.ticketdate=(0,a.default)().add(1,"d").format("YYYY-MM-DD");break;case 2:this.ticketdate=(0,a.default)().add(2,"d").format("YYYY-MM-DD");break;default:break}},chose:function(){this.choseadate=!0,this.moreday=!0,this.org=999,this.lh=!0},choseticket:function(t,e,n,o,a,i,s){t==this.org2?this.chosetickets=!this.chosetickets:this.chosetickets=!0,this.org2=t,this.tickettp=n,this.ticketprice=o,this.total=100*Number(this.ticketprice)*Number(this.ticketnub)/100,this.rule=s},onChange:function(t){this.ticketnub=t.value,this.rule?this.neednub=this.ticketnub:this.neednub=1,this.total=100*Number(this.ticketprice)*Number(this.ticketnub)/100},stopMove:function(t){},show:function(t){var e=this;this.ifshow=!0,this.site=0;setTimeout(function(){e.translateValue=0,null},0),setTimeout(function(){e.iftoggle=!0,null},0)},close:function(){var t=this;null===this.timer&&this.iftoggle&&(this.translateValue=-100,this.btns=!1,this.choseadate=!1,this.timer=setTimeout(function(){t.ifshow=!1,t.timer=null,t.iftoggle=!1,t.$emit("closeCallBack",t.btns),t.$emit("change",!1)},0))},ableClose:function(){this.autoClose&&this.close()},stopEvent:function(t){},doSome:function(){},handleToComment:function(){this.$emit("handleChangeCss",!0),this.showAddComment=!0},handleShowCom:function(t){this.showAddComment=t},handleShowChose:function(t){this.showchose=t},showchosecst:function(){this.showchose=!0;var e=t.getStorageSync("openId"),n=(t.getStorageSync("externalId"),this);o.requestZT.post("/api/public/order/getUserMange",{merchantCode:"b49c90557893a9f8ed229df13305804a",openId:e}).then(function(t){n.rule?n.neednub=n.ticketnub:n.neednub=1;for(var e=t.data.content,o=0;o<e.length;o++)if(e[o].showbtn=!1,n.arr.length>0)for(var a=0;a<n.arr.length;a++)n.arr[a].openCode==e[o].openCode&&(e[o].showbtn=!0);n.list=e,console.log(e,n.arr,"jj"," at components/popup-layer.vue:680")}).catch(function(t){console.log(t," at components/popup-layer.vue:683")})},shuaxin:function(t,e){t&&(this.arr=e,this.showchosecst())},toHuEr:function(){t.navigateTo({url:"/pages/nothing/huerNothing"})}},onPageScroll:function(){this.$emit("handleChangeCss",!1)}};e.default=h}).call(this,n("6e42")["default"])},ab57:function(t,e,n){},bbc4:function(t,e,n){"use strict";var o=n("ab57"),a=n.n(o);a.a},c0df:function(t,e,n){"use strict";n.r(e);var o=n("37aa"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},cf86:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},d80b:function(t,e,n){"use strict";n.r(e);var o=n("cf86"),a=n("c0df");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("bbc4");var s=n("2877"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,"7147561c",null);e["default"]=r.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/popup-layer-create-component',
    {
        'components/popup-layer-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("d80b"))
        })
    },
    [['components/popup-layer-create-component']]
]);                
